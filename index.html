<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jai Shree Group - Premium Real Estate & Interiors</title>
    
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        :root {
            --bg-light: #fdfdfd;
            --bg-alt: #f1f5f9;
            --primary-dark: #1a202c;
            --text-dark: #2d3748;
            --text-muted: #718096;
            --gold: #c09a3e;
            --teal: #14b8a6;
        }
        html { scroll-behavior: smooth; }
        /* Updated Font Families */
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-light); color: var(--text-dark); overflow-x: hidden; }
        h1, h2, h3, h4, .font-display { font-family: 'Lora', serif; color: var(--primary-dark); }
        
        /* Admin-mode styles */
        .admin-edit-mode [data-key] { outline: 2px dashed var(--teal); outline-offset: 4px; cursor: text; transition: outline 0.2s, background-color 0.2s; }
        .admin-edit-mode [data-key]:hover { outline-color: var(--gold); background-color: #f0fdfa; }
        .admin-edit-mode [data-key-img], .admin-edit-mode .gallery-item .relative { position: relative; cursor: pointer; }
        .admin-edit-mode [data-key-img]::after, .admin-edit-mode .gallery-item .relative::after {
            content: '\f303'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); background-color: rgba(26, 32, 44, 0.8); color: white; padding: 1rem; border-radius: 50%;
            z-index: 10; transition: all 0.2s; opacity: 0; pointer-events: none;
        }
        .admin-edit-mode [data-key-img]:hover::after, .admin-edit-mode .gallery-item .relative:hover::after { opacity: 1; transform: translate(-50%, -50%) scale(1.1); background-color: var(--gold); }
        .admin-gallery-controls, .admin-project-controls, .admin-hero-controls { display: none; }
        .admin-edit-mode .admin-gallery-controls, .admin-edit-mode .admin-project-controls, .admin-edit-mode .admin-hero-controls { display: flex; }
        .remove-cover-btn {
            display: none; position: absolute; top: 0.5rem; left: 0.5rem; z-index: 11; background-color: #dc2626;
            color: white; border-radius: 50%; width: 24px; height: 24px; font-size: 16px; border: none;
            cursor: pointer; font-weight: bold; line-height: 24px; text-align: center;
        }
        .admin-edit-mode [data-key-img]:hover .remove-cover-btn { display: block; }


        .text-gold { color: var(--gold); } .bg-gold { background-color: var(--gold); } .bg-primary-dark { background-color: var(--primary-dark); } .text-teal { color: var(--teal); }

        .nav-link { position: relative; transition: color 0.3s; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 50%; transform: translateX(-50%); background-color: var(--gold); transition: width 0.3s; }
        .nav-link:hover, .nav-link.active { color: var(--primary-dark); }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        
        .page-section { display: none; }
        .page-section.active { display: block; animation: fadeIn 0.8s ease-in-out; }
        
        .hero-slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; transition: opacity 1.5s ease-in-out, transform 6s linear; z-index: 1; transform: scale(1.1); }
        .hero-slide.active { opacity: 1; transform: scale(1); }

        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content { background: white; padding: 2rem; border-radius: 0.5rem; max-width: 600px; width: 90%; position: relative; transform: translateY(-20px); transition: all 0.3s; }
        .modal-overlay.active .modal-content { transform: translateY(0); }
        .modal-close { position: absolute; top: 1rem; right: 1rem; cursor: pointer; font-size: 1.5rem; color: #9ca3af; z-index: 20; }
        
        .spinner { width: 56px; height: 56px; border: 5px solid var(--teal); border-bottom-color: transparent; border-radius: 50%; display: inline-block; animation: rotation 1s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* Animation Classes */
        .animate-on-scroll { opacity: 0; transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: none !important; }
        .animate-fade-in-up { transform: translateY(50px); }
        .animate-slide-in-left { transform: translateX(-80px); }
        .animate-slide-in-right { transform: translateX(80px); }
        .timeline-item { transform: translateX(-30px); }

        .hero-title span { display: inline-block; opacity: 0; transform: translateY(30px); transition: opacity 0.6s, transform 0.6s; }
        .hero-title.is-visible span { opacity: 1; transform: translateY(0); }
        
        #scroll-to-top { position: fixed; bottom: -100px; right: 40px; width: 50px; height: 50px; background-color: var(--gold); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 100; transition: all 0.5s; }
        #scroll-to-top.visible { bottom: 120px; }
        
        /* Modals for Image Management */
        #upload-modal .modal-content, #project-details-modal .modal-content { max-width: 500px; }
        #drop-zone { border: 3px dashed #ccc; border-radius: 0.5rem; padding: 3rem 1rem; text-align: center; transition: all 0.2s; }
        #drop-zone.drag-over { border-color: var(--teal); background-color: #f0fdfa; }
        
        #hero-manager-modal .modal-content, #project-images-manager-modal .modal-content { max-width: 90vw; max-height: 90vh; display: flex; flex-direction: column; }
        #hero-manager-grid, #project-images-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; overflow-y: auto; padding: 1rem; flex-grow: 1; }
        .manager-item { position: relative; cursor: pointer; }
        .manager-item img { width: 100%; height: 120px; object-fit: cover; border-radius: 0.5rem; border: 3px solid transparent; transition: border 0.2s; }
        .manager-item input:checked ~ img { border-color: var(--teal); }
        .manager-item .delete-btn { position: absolute; top: 0.5rem; right: 0.5rem; background-color: #1a202c; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; font-size: 14px; cursor: pointer; opacity: 0; transition: opacity 0.2s; display: flex; align-items: center; justify-content: center; }
        .manager-item:hover .delete-btn { opacity: 1; }

        /* Project Details Slider */
        #project-details-modal .modal-content { max-width: 800px; padding: 0; }
        #project-details-slider { position: relative; }
        .project-detail-slide { display: none; }
        .project-detail-slide img { width: 100%; height: 60vh; object-fit: cover; border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem;}
        #project-details-info { padding: 2rem; }
        #project-details-slider .prev, #project-details-slider .next {
             position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(0,0,0,0.5); color: white; padding: 1rem; border-radius: 50%; cursor: pointer; z-index: 10;
        }
        #project-details-slider .prev { left: 1rem; }
        #project-details-slider .next { right: 1rem; }
        
        /* CSR Slider Arrow Fix */
        #csr-slider-wrapper .prev, #csr-slider-wrapper .next {
            cursor: pointer; position: absolute; top: 50%; transform: translateY(-50%); width: 50px; height: 50px; color: white; font-weight: bold; font-size: 20px; transition: 0.6s ease; border-radius: 50%; user-select: none; background-color: rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; z-index: 10;
        }
        #csr-slider-wrapper .prev { left: 16px; }
        #csr-slider-wrapper .next { right: 16px; }
        
        /* Chat Assistant Styles */
        #chat-assistant { position: fixed; bottom: 40px; right: 110px; z-index: 100; }
        #chat-assistant-icon { width: 60px; height: 60px; background: linear-gradient(45deg, var(--teal), var(--primary-dark)); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; cursor: pointer; box-shadow: 2px 2px 8px rgba(0,0,0,0.4); }
        #chat-box { position: absolute; bottom: 80px; right: 0; width: 350px; max-height: 80vh; background: white; border-radius: 1rem; box-shadow: 0 5px 25px rgba(0,0,0,0.2); transform-origin: bottom right; transition: all 0.3s; transform: scale(0); opacity: 0; display: flex; flex-direction: column; }
        #chat-box.active { transform: scale(1); opacity: 1; }
        #chat-header { background: linear-gradient(45deg, var(--primary-dark), var(--teal)); color: white; padding: 0.75rem 1rem; border-top-left-radius: 1rem; border-top-right-radius: 1rem; display: flex; justify-content: space-between; align-items: center; }
        #chat-body { padding: 1rem; flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; }
        #chat-footer { position: relative; padding: 1rem; border-top: 1px solid #e5e7eb; display: flex; }
        #chat-input { flex-grow: 1; border: 1px solid #d1d5db; border-radius: 20px; padding: 0.5rem 1rem; outline: none; }
        #chat-send { background: var(--teal); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 0.5rem; cursor: pointer; flex-shrink: 0; }
        
        .chat-message { max-width: 80%; padding: 0.75rem; border-radius: 1rem; margin-bottom: 0.5rem; line-height: 1.4; }
        .user-message { background-color: var(--teal); color: white; align-self: flex-end; border-bottom-right-radius: 0; }
        .bot-message { background-color: #e5e7eb; color: var(--text-dark); align-self: flex-start; border-bottom-left-radius: 0; }
        .bot-message a { color: var(--teal); text-decoration: underline; font-weight: 600; }
        .typing-indicator { align-self: flex-start; margin-bottom: 0.5rem; }
        .typing-indicator span { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: #9ca3af; margin: 0 2px; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 40px; right: 40px; background-color: #25d366; color: #FFF; border-radius: 50px; text-align: center; font-size: 30px; box-shadow: 2px 2px 6px rgba(0,0,0,0.4); z-index: 100; transition: all 0.3s; display: flex; align-items: center; justify-content: center; }
        
        .portfolio-tab, .interior-tab {
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            border: 2px solid transparent;
            background-color: #f3f4f6;
            color: var(--text-muted);
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
        }
        .portfolio-tab:hover, .interior-tab:hover {
            background-color: #e5e7eb;
            color: var(--primary-dark);
        }
        .portfolio-tab.active, .interior-tab.active {
            background-color: var(--primary-dark);
            color: white;
            border-color: var(--gold);
            transform: scale(1.05);
        }
        .portfolio-tab-content, .interior-tab-content { display: none; }
        .portfolio-tab-content.active, .interior-tab-content.active { display: grid; animation: fadeIn 0.5s; }


        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; line-height: 1.1; } h2 { font-size: 2rem; }
            .whatsapp-float { bottom: 20px; right: 20px; width: 50px; height: 50px; font-size: 24px; }
            #chat-assistant { bottom: 20px; right: 80px; }
            #chat-assistant-icon { width: 50px; height: 50px; font-size: 24px; }
            #scroll-to-top { width: 44px; height: 44px; font-size: 20px; }
            #scroll-to-top.visible { bottom: 90px; right: 20px; }
            #chat-box { width: calc(100vw - 30px); right: -80px; bottom: 80px; }
        }
    </style>
</head>
<body class="bg-white text-text-dark">
    
    <input type="file" id="image-uploader" class="hidden" accept="image/*" multiple>

    <!-- Admin Panel -->
    <div id="admin-panel" class="hidden fixed bottom-5 left-1/2 -translate-x-1/2 z-[1001] bg-primary-dark text-white p-4 rounded-lg shadow-2xl flex items-center gap-4">
        <p class="font-bold">Admin Mode</p>
        <button id="save-changes-btn" class="bg-teal hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-md">
            <span class="btn-text">Save Changes</span>
            <span class="btn-spinner hidden animate-spin"><i class="fas fa-spinner"></i></span>
        </button>
        <button id="logout-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md">Logout</button>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal-overlay">
        <div class="modal-content"><h2 class="text-3xl font-display font-bold mb-4">Admin Login</h2><form id="admin-login-form"><div class="mb-4"><label for="admin-email" class="block font-semibold mb-2">Email</label><input type="email" id="admin-email" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold" required></div><div class="mb-4"><label for="admin-password" class="block font-semibold mb-2">Password</label><input type="password" id="admin-password" class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold" required></div><button type="submit" class="w-full bg-primary-dark text-white font-bold py-3 px-4 rounded-md hover:bg-gold transition-colors">Login</button><p id="login-error" class="text-red-500 text-sm mt-4 text-center hidden"></p></form></div>
    </div>
    
    <!-- Image Upload (Drag & Drop) Modal -->
    <div id="upload-modal" class="modal-overlay" onclick="closeModal('upload-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <i class="fas fa-times modal-close" onclick="closeModal('upload-modal')"></i>
            <h2 class="text-3xl font-display font-bold mb-4">Upload New Image(s)</h2>
            <div id="drop-zone">
                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400"></i>
                <p class="mt-4">Drag & drop your image(s) here, or <button class="text-teal font-bold" onclick="document.getElementById('image-uploader').click()">browse files</button>.</p>
            </div>
        </div>
    </div>
    
    <!-- Hero Image Manager Modal -->
    <div id="hero-manager-modal" class="modal-overlay" onclick="closeModal('hero-manager-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <i class="fas fa-times modal-close" onclick="closeModal('hero-manager-modal')"></i>
            <h2 class="text-3xl font-display font-bold mb-2">Manage Home Slideshow</h2>
            <p class="text-text-muted mb-4">Select the images to display on the home page.</p>
            <div id="hero-manager-grid"></div>
            <div class="flex justify-between items-center mt-4 pt-4 border-t">
                 <button class="bg-teal text-white font-bold py-2 px-4 rounded-md" onclick="openUploadModal('addHero')">
                    <i class="fas fa-plus mr-2"></i>Add New Image
                </button>
                <button class="bg-primary-dark text-white font-bold py-2 px-4 rounded-md" onclick="saveHeroSelection()">Save Selection</button>
            </div>
        </div>
    </div>

     <!-- Project Images Manager Modal -->
    <div id="project-images-manager-modal" class="modal-overlay" onclick="closeModal('project-images-manager-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <i class="fas fa-times modal-close" onclick="closeModal('project-images-manager-modal')"></i>
            <h2 id="project-images-title" class="text-3xl font-display font-bold mb-2">Manage Project Images</h2>
            <p class="text-text-muted mb-4">Add or remove additional images for this project.</p>
            <div id="project-images-grid"></div>
            <div class="flex justify-end items-center mt-4 pt-4 border-t">
                 <button id="project-manager-add-image-btn" class="bg-teal text-white font-bold py-2 px-4 rounded-md">
                    <i class="fas fa-plus mr-2"></i>Add New Image(s)
                </button>
            </div>
        </div>
    </div>
    
    <!-- Project Details Modal -->
    <div id="project-details-modal" class="modal-overlay" onclick="closeModal('project-details-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <i class="fas fa-times modal-close" onclick="closeModal('project-details-modal')"></i>
            <div id="project-details-slider"></div>
            <div id="project-details-info"></div>
        </div>
    </div>

    <!-- Header & Navbar -->
    <header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300" id="header">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" onclick="showPage('home')"><img data-key-img="logo" src="" alt="Jai Shree Group Logo" class="h-16 w-auto"></a>
            <div class="hidden md:flex items-center space-x-8" id="nav-links">
                <a href="#" onclick="showPage('home')" class="nav-link active">Home</a>
                <a href="#" onclick="showPage('about')" class="nav-link">About Us</a>
                <a href="#" onclick="showPage('services')" class="nav-link">Services</a>
                <a href="#" onclick="showPage('projects')" class="nav-link">Projects</a>
                <a href="#" onclick="showPage('clientele')" class="nav-link">Our Clientele</a>
                <a href="#" onclick="showPage('csr')" class="nav-link">CSR</a>
                <a href="#" onclick="showPage('contact')" class="nav-link">Contact</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-2xl"><i class="fas fa-bars"></i></button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
             <a href="#" onclick="showPage('home'); closeMenu();" class="block py-2">Home</a>
             <a href="#" onclick="showPage('about'); closeMenu();" class="block py-2">About Us</a>
             <a href="#" onclick="showPage('services'); closeMenu();" class="block py-2">Services</a>
             <a href="#" onclick="showPage('projects'); closeMenu();" class="block py-2">Projects</a>
             <a href="#" onclick="showPage('clientele'); closeMenu();" class="block py-2">Our Clientele</a>
             <a href="#" onclick="showPage('csr'); closeMenu();" class="block py-2">CSR</a>
             <a href="#" onclick="showPage('contact'); closeMenu();" class="block py-2">Contact</a>
        </div>
    </header>

    <main>
        <!-- Home Section -->
        <section id="home" class="page-section active">
            <div class="relative h-[80vh] flex items-center justify-center text-center text-white overflow-hidden">
                <div id="hero-slideshow" class="absolute top-0 left-0 w-full h-full">
                     <!-- This will be populated by JavaScript -->
                </div>
                <div class="relative z-10 px-6">
                    <h1 class="text-4xl md:text-6xl font-bold font-display text-white hero-title" data-key="hero-title"></h1>
                    <p class="mt-4 text-xl" data-key="hero-subtitle"></p>
                    <div class="admin-hero-controls justify-center mt-8">
                        <button class="bg-gold text-white font-bold py-2 px-6 rounded-md" onclick="openHeroManager()">Manage Slideshow</button>
                    </div>
                </div>
            </div>

            <div class="py-20 bg-gray-50">
                <div class="container mx-auto px-6 grid md:grid-cols-2 gap-8">
                    <a href="#" onclick="showPage('projects', 'real-estate')" class="group block relative h-96 rounded-lg overflow-hidden shadow-2xl">
                         <div class="absolute inset-0 bg-center transition-transform duration-500 group-hover:scale-110" data-key-img="gateway-img-1" style=""></div>
                         <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                             <div class="text-center text-white p-4">
                                <h2 class="text-4xl font-display text-white" style="color: var(--gold);" data-key="gateway-title-1"></h2>
                                <p class="text-xl mt-2" data-key="gateway-subtitle-1"></p>
                            </div>
                        </div>
                    </a>
                    <a href="#" onclick="showPage('projects', 'interiors')" class="group block relative h-96 rounded-lg overflow-hidden shadow-2xl">
                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110" data-key-img="gateway-img-2" style=""></div>
                         <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                             <div class="text-center text-white p-4">
                                <h2 class="text-4xl font-display text-white" style="color: var(--gold);" data-key="gateway-title-2"></h2>
                                <p class="text-xl mt-2" data-key="gateway-subtitle-2"></p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <section class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl font-bold font-display mb-12 animate-on-scroll animate-fade-in-up" data-key="why-choose-title"></h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="0">
                            <div class="bg-gold text-white rounded-full w-20 h-20 flex items-center justify-center mx-auto text-3xl mb-4"><i class="fas fa-trophy"></i></div>
                            <h3 class="text-2xl font-bold font-display" data-key="why-choose-1-title"></h3>
                            <p class="text-text-muted mt-2" data-key="why-choose-1-text"></p>
                        </div>
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="200">
                            <div class="bg-gold text-white rounded-full w-20 h-20 flex items-center justify-center mx-auto text-3xl mb-4"><i class="fas fa-check-circle"></i></div>
                            <h3 class="text-2xl font-bold font-display" data-key="why-choose-2-title"></h3>
                            <p class="text-text-muted mt-2" data-key="why-choose-2-text"></p>
                        </div>
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="400">
                            <div class="bg-gold text-white rounded-full w-20 h-20 flex items-center justify-center mx-auto text-3xl mb-4"><i class="fas fa-users"></i></div>
                            <h3 class="text-2xl font-bold font-display" data-key="why-choose-3-title"></h3>
                            <p class="text-text-muted mt-2" data-key="why-choose-3-text"></p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="py-20 bg-alt">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl font-bold font-display mb-4 animate-on-scroll animate-fade-in-up" data-key="testimonials-title"></h2>
                    <p class="text-text-muted mb-12 max-w-2xl mx-auto animate-on-scroll animate-fade-in-up" data-delay="200" data-key="testimonials-subtitle"></p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-white p-8 rounded-lg text-left shadow-lg animate-on-scroll animate-fade-in-up" data-delay="0">
                            <i class="fas fa-quote-left text-gold text-4xl mb-4"></i>
                            <p class="text-text-dark italic" data-key="testimonial-1-text"></p>
                            <div class="mt-6 pt-6 border-t">
                                <h4 class="font-bold text-primary-dark" data-key="testimonial-1-name"></h4>
                                <p class="text-sm text-gold" data-key="testimonial-1-role"></p>
                            </div>
                        </div>
                        <div class="bg-white p-8 rounded-lg text-left shadow-lg animate-on-scroll animate-fade-in-up" data-delay="200">
                            <i class="fas fa-quote-left text-gold text-4xl mb-4"></i>
                             <p class="text-text-dark italic" data-key="testimonial-2-text"></p>
                            <div class="mt-6 pt-6 border-t">
                                <h4 class="font-bold text-primary-dark" data-key="testimonial-2-name"></h4>
                                <p class="text-sm text-gold" data-key="testimonial-2-role"></p>
                            </div>
                        </div>
                        <div class="bg-white p-8 rounded-lg text-left shadow-lg animate-on-scroll animate-fade-in-up" data-delay="400">
                             <i class="fas fa-quote-left text-gold text-4xl mb-4"></i>
                             <p class="text-text-dark italic" data-key="testimonial-3-text"></p>
                            <div class="mt-6 pt-6 border-t">
                                <h4 class="font-bold text-primary-dark" data-key="testimonial-3-name"></h4>
                                <p class="text-sm text-gold" data-key="testimonial-3-role"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div id="counter-section" class="bg-white py-16">
                <div class="container mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                    <div><i class="fas fa-home text-4xl text-teal mb-3"></i><p class="text-4xl font-bold text-primary-dark" data-key="stats-1-value" data-target="1155">0</p><p class="text-text-muted" data-key="stats-1-label"></p></div>
                    <div><i class="fas fa-ruler-combined text-4xl text-teal mb-3"></i><p class="text-4xl font-bold text-primary-dark" data-key="stats-2-value" data-target="75">0</p><p class="text-text-muted" data-key="stats-2-label"></p></div>
                    <div><i class="fas fa-hard-hat text-4xl text-teal mb-3"></i><p class="text-4xl font-bold text-primary-dark" data-key="stats-3-value" data-target="600">0</p><p class="text-text-muted" data-key="stats-3-label"></p></div>
                    <div><i class="fas fa-calendar-alt text-4xl text-teal mb-3"></i><p class="text-4xl font-bold text-primary-dark" data-key="stats-4-value" data-target="40">0</p><p class="text-text-muted" data-key="stats-4-label"></p></div>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="page-section py-20">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-16 items-center">
                    <div class="animate-on-scroll animate-slide-in-left">
                        <h2 class="text-4xl font-bold font-display" data-key="about-title">The Jai Shree Group Story</h2>
                        <p class="mt-4 text-text-muted" data-key="about-p1">Founded on the principles of integrity and quality, Jai Shree Group began its journey in 1980 with a vision to redefine the real estate landscape of Rajasthan. From humble beginnings in residential plotting, we have grown into a diversified powerhouse, delivering landmark residential and commercial projects that shape the skyline.</p>
                        <p class="mt-4 text-text-muted" data-key="about-p2">Our expansion into turnkey interiors was a natural evolution, driven by our desire to provide holistic, end-to-end solutions for our discerning clientele. Our success is built on a foundation of trust with our clients, partners, and community.</p>
                        <h3 class="text-3xl font-bold font-display mt-8" data-key="about-mission-title">Our Mission & Vision</h3>
                        <p class="mt-4 text-text-muted" data-key="about-mission-text"><b>Our Mission:</b> To deliver superior quality construction and design solutions that exceed client expectations, while upholding the highest standards of ethics and sustainability.</p>
                        <p class="mt-4 text-text-muted" data-key="about-vision-text"><b>Our Vision:</b> To be Indiaâ€™s most trusted and innovative real estate and interiors group, renowned for creating lasting value and iconic landmarks.</p>
                        <button onclick="openModal('director-modal')" class="mt-8 bg-primary-dark text-white font-bold py-3 px-6 rounded-md hover:bg-gold">Meet The Founder</button>
                    </div>
                    <div id="timeline" class="animate-on-scroll animate-slide-in-right">
                        <div class="timeline-item"><div class="timeline-dot"><i class="fas fa-flag"></i></div><div class="timeline-content"><h3 class="text-xl font-bold">1980 - The Beginning</h3><p class="text-text-muted">Jai Shree Group is founded, starting with residential plotting projects.</p></div></div>
                        <div class="timeline-item"><div class="timeline-dot"><i class="fas fa-building"></i></div><div class="timeline-content"><h3 class="text-xl font-bold">1995 - Expansion</h3><p class="text-text-muted">Expanded into constructing luxury flats and commercial properties.</p></div></div>
                        <div class="timeline-item"><div class="timeline-dot"><i class="fas fa-couch"></i></div><div class="timeline-content"><h3 class="text-xl font-bold">2005 - Interiors Division</h3><p class="text-text-muted">Launched a full-service interior design wing to offer turnkey solutions.</p></div></div>
                        <div class="timeline-item"><div class="timeline-dot"><i class="fas fa-star"></i></div><div class="timeline-content"><h3 class="text-xl font-bold">2024 - A Trusted Name</h3><p class="text-text-muted">Recognized as a leading name with over 1155 successful projects.</p></div></div>
                    </div>
                </div>

                <div class="mt-20 text-center">
                    <h2 class="text-4xl font-bold font-display mb-12 animate-on-scroll animate-fade-in-up" data-key="values-title">Our Core Values</h2>
                    <div class="grid md:grid-cols-3 gap-12">
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="0"><i class="fas fa-gem text-4xl text-teal"></i><h3 class="text-2xl font-bold font-display mt-4" data-key="value-1-title">Quality</h3><p class="text-text-muted mt-2" data-key="value-1-text">Delivering excellence and superior craftsmanship in every detail is the hallmark of our work.</p></div>
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="200"><i class="fas fa-handshake text-4xl text-teal"></i><h3 class="text-xl font-bold font-display mt-4" data-key="value-2-title">Integrity</h3><p class="text-text-muted mt-2" data-key="value-2-text">We conduct our business with the highest levels of honesty, transparency, and ethical standards.</p></div>
                        <div class="animate-on-scroll animate-fade-in-up" data-delay="400"><i class="fas fa-lightbulb text-4xl text-teal"></i><h3 class="text-2xl font-bold font-display mt-4" data-key="value-3-title">Innovation</h3><p class="text-text-muted mt-2" data-key="value-3-text">Continuously embracing new ideas and technologies to build smarter, more sustainable spaces for the future.</p></div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Services Section -->
        <section id="services" class="page-section py-20 bg-alt">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12 animate-on-scroll animate-fade-in-up">
                     <h1 class="text-5xl font-bold font-display" data-key="services-title">Our Services</h1>
                     <p class="text-text-muted mt-2 max-w-3xl mx-auto" data-key="services-subtitle">Comprehensive solutions in real estate and interior design, tailored to your needs.</p>
                </div>
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="animate-on-scroll animate-slide-in-left"><img data-key-img="services-img-1" src="" alt="Real Estate Services" class="rounded-lg shadow-xl"></div>
                    <div class="animate-on-scroll animate-slide-in-right"><h2 class="text-3xl font-bold font-display" data-key="services-1-title">Real Estate Development</h2><p class="text-text-muted mt-4" data-key="services-1-p">We specialize in a wide range of real estate services, ensuring quality and timely delivery for every project.</p><ul class="mt-6 space-y-3"><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-1-li1"><strong>Residential & Commercial Construction:</strong> Building modern homes and state-of-the-art commercial spaces.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-1-li2"><strong>Colony & Township Development:</strong> Creating vibrant, well-planned communities from the ground up.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-1-li3"><strong>Infrastructure Projects:</strong> Expertise in road construction and other large-scale civil engineering works.</span></li></ul></div>
                </div>
                <div class="grid md:grid-cols-2 gap-12 items-center mt-20">
                     <div class="md:order-2 animate-on-scroll animate-slide-in-right"><img data-key-img="services-img-2" src="" alt="Interior Design Services" class="rounded-lg shadow-xl"></div>
                    <div class="md:order-1 animate-on-scroll animate-slide-in-left"><h2 class="text-3xl font-bold font-display" data-key="services-2-title">Turnkey Interior Solutions</h2><p class="text-text-muted mt-4" data-key="services-2-p">Our interior design division, Jai Shree Interiors, offers end-to-end solutions to transform your space.</p><ul class="mt-6 space-y-3"><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-2-li1"><strong>Residential Interiors:</strong> Crafting beautiful and functional interiors for flats, houses, and villas.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-2-li2"><strong>Commercial & Institutional Interiors:</strong> Designing innovative spaces for offices, hospitals, universities, and retail.</span></li><li class="flex items-start"><i class="fas fa-check-circle text-teal mt-1 mr-3"></i><span data-key="services-2-li3"><strong>Complete Turnkey Projects:</strong> From concept to completion, we manage every aspect of your interior project.</span></li></ul></div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="page-section py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12 animate-on-scroll animate-fade-in-up"><h1 class="text-5xl font-bold font-display" data-key="projects-title">Our Projects</h1><p class="text-text-muted mt-2 max-w-3xl mx-auto" data-key="projects-subtitle">A testament to our commitment to quality, innovation, and architectural excellence across India.</p></div>
                <div id="real-estate" class="portfolio-category mb-16">
                    <h2 class="text-3xl font-bold font-display mb-8 text-center animate-on-scroll animate-fade-in-up" data-key="project-re-title">Real Estate Projects</h2>
                    <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-10 animate-on-scroll animate-fade-in-up"><button class="portfolio-tab active" data-key="project-tab-colonies" onclick="showTab(event, 'colonies')">Colonies</button><button class="portfolio-tab" data-key="project-tab-residential" onclick="showTab(event, 'residential')">Residential</button><button class="portfolio-tab" data-key="project-tab-commercial" onclick="showTab(event, 'commercial')">Commercial</button></div>
                    <div id="colonies" class="portfolio-tab-content active"><div class="admin-gallery-controls justify-center mb-8"><button onclick="openUploadModal('project-col')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Colony Project</button></div><div id="colonies-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>
                    <div id="residential" class="portfolio-tab-content"><div class="admin-gallery-controls justify-center mb-8"><button onclick="openUploadModal('project-res')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Residential Project</button></div><div id="residential-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>
                    <div id="commercial" class="portfolio-tab-content"><div class="admin-gallery-controls justify-center mb-8"><button onclick="openUploadModal('project-com')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Commercial Project</button></div><div id="commercial-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>
                </div>
                <div id="interiors" class="portfolio-category">
                     <h2 class="text-3xl font-bold font-display mb-8 text-center animate-on-scroll animate-fade-in-up" data-key="project-int-title">Interior Design Projects</h2>
                     <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-10 animate-on-scroll animate-fade-in-up"><button class="interior-tab active" data-key="project-tab-int-res" onclick="showInteriorTab(event, 'residential-int')">Residential</button><button class="interior-tab" data-key="project-tab-int-com" onclick="showInteriorTab(event, 'commercial-int')">Commercial</button></div>
                    <div id="residential-int" class="interior-tab-content active"><div class="admin-gallery-controls justify-center mb-8"><button onclick="openUploadModal('project-int-res')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Residential Interior</button></div><div id="residential-int-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>
                    <div id="commercial-int" class="interior-tab-content"><div class="admin-gallery-controls justify-center mb-8"><button onclick="openUploadModal('project-int-com')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Commercial Interior</button></div><div id="commercial-int-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>
                </div>
            </div>
        </section>

        <!-- Our Clientele Section -->
        <section id="clientele" class="page-section py-20 bg-alt">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12 animate-on-scroll animate-fade-in-up"><h1 class="text-5xl font-bold font-display" data-key="clientele-title">Our Esteemed Clientele</h1><p class="text-text-muted mt-2 max-w-3xl mx-auto" data-key="clientele-subtitle">We are proud to have collaborated with industry leaders and prestigious organizations.</p></div>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8 items-center">
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up"><img data-key-img="client-logo-1" src="" alt="Honeywell Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="50"><img data-key-img="client-logo-2" src="" alt="Aditya Birla Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="100"><img data-key-img="client-logo-3" src="" alt="L&T Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="150"><img data-key-img="client-logo-4" src="" alt="Tata Projects Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="200"><img data-key-img="client-logo-5" src="" alt="DLF Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="250"><img data-key-img="client-logo-6" src="" alt="Godrej Properties Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="300"><img data-key-img="client-logo-7" src="" alt="Oberoi Realty Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="350"><img data-key-img="client-logo-8" src="" alt="HSBC Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="400"><img data-key-img="client-logo-9" src="" alt="Kotak Bank Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="450"><img data-key-img="client-logo-10" src="" alt="Lupin Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="500"><img data-key-img="client-logo-11" src="" alt="Infosys Logo" class="mx-auto max-h-12 object-contain"></div>
                    <div class="p-4 bg-white rounded-lg shadow-md flex items-center justify-center h-24 animate-on-scroll animate-fade-in-up" data-delay="550"><img data-key-img="client-logo-12" src="" alt="Wipro Logo" class="mx-auto max-h-12 object-contain"></div>
                </div>
            </div>
        </section>
        
        <!-- CSR Section -->
        <section id="csr" class="page-section py-20 bg-alt">
            <div class="container mx-auto px-6">
                 <div class="text-center bg-white p-8 md:p-12 rounded-lg shadow-lg">
                    <h2 class="text-4xl font-bold font-display mb-4 animate-on-scroll animate-fade-in-up" data-key="csr-title">Corporate Social Responsibility</h2>
                    <p class="text-xl text-gold font-semibold mb-8 animate-on-scroll animate-fade-in-up" data-key="csr-subtitle">Under the Mangilal Suthar Charitable Trust</p>
                    <!-- UPDATED: More descriptive CSR paragraph -->
                    <p class="text-text-muted mt-2 max-w-3xl mx-auto mb-12 animate-on-scroll animate-fade-in-up" data-key="csr-p">At Jai Shree Group, we believe our responsibility extends beyond the boundaries of our construction sites. We are deeply committed to giving back to the community and building a better, more sustainable society for future generations. Our initiatives, driven by the Mangilal Suthar Charitable Trust, focus on the core pillars of education, environmental sustainability, and community welfare.</p>
                    
                    <!-- UPDATED & EXPANDED: CSR Initiative 1: Hostel -->
                    <div class="csr-initiative-block mb-16">
                        <h3 class="text-3xl font-bold font-display mt-16 mb-4 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-1-title">Nurturing Future Generations: Our Hostel Initiative</h3>
                        <p class="text-text-muted max-w-3xl mx-auto mb-8 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-1-desc">We believe education is the key to empowerment. To support this belief, we operate a dedicated hostel providing safe housing, nutrition, and a conducive learning environment for underprivileged students. Our goal is to remove barriers to education and provide every child with the opportunity to achieve their dreams.</p>
                        <div class="admin-gallery-controls justify-center mb-4">
                            <button onclick="openUploadModal('csr-1')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Hostel Photos</button>
                        </div>
                        <div id="csr-gallery-1" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- CSR Images for the hostel will be loaded here -->
                        </div>
                    </div>

                    <!-- UPDATED & EXPANDED: CSR Initiative 2: Environment -->
                    <div class="csr-initiative-block mb-16">
                        <h3 class="text-3xl font-bold font-display mt-16 mb-4 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-2-title">A Greener Tomorrow: 1000+ Trees Initiative</h3>
                        <p class="text-text-muted max-w-3xl mx-auto mb-8 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-2-desc">We are committed to preserving and protecting our environment. As part of our green initiatives, we have set an ambitious goal to plant over 1,000 trees this year. This project aims to enhance biodiversity, improve air quality, and create a healthier local environment for our communities.</p>
                        <div class="admin-gallery-controls justify-center mb-4">
                            <button onclick="openUploadModal('csr-2')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Tree Planting Photos</button>
                        </div>
                        <div id="csr-gallery-2" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- CSR Images for tree planting will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- NEW: CSR Initiative 3: Community Support -->
                    <div class="csr-initiative-block">
                        <h3 class="text-3xl font-bold font-display mt-16 mb-4 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-3-title">Community & Animal Welfare</h3>
                        <p class="text-text-muted max-w-3xl mx-auto mb-8 animate-on-scroll animate-fade-in-up" data-key="csr-initiative-3-desc">Our commitment to the community also includes caring for stray and abandoned animals. We actively support and manage local 'Gausalas' (cow shelters), ensuring these gentle animals receive food, shelter, and medical care, reflecting our deep-rooted cultural values of compassion for all living beings.</p>
                        <div class="admin-gallery-controls justify-center mb-4">
                            <button onclick="openUploadModal('csr-3')" class="bg-teal text-white font-bold py-2 px-6 rounded-md"><i class="fas fa-plus mr-2"></i>Add Welfare Photos</button>
                        </div>
                        <div id="csr-gallery-3" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- CSR Images for initiative 3 will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="page-section py-20 bg-alt">
            <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12">
                <div class="bg-white p-8 rounded-lg shadow-lg animate-on-scroll animate-slide-in-left">
                    <h2 class="text-3xl font-bold font-display mb-6" data-key="contact-form-title">Send Us a Message</h2>
                    <form id="contact-form">
                        <div class="mb-4"><label for="name" class="block font-semibold mb-2">Full Name</label><input type="text" id="name" name="name" class="w-full px-4 py-2 border rounded-md" required></div>
                        <div class="mb-4"><label for="email" class="block font-semibold mb-2">Email Address</label><input type="email" id="email" name="email" class="w-full px-4 py-2 border rounded-md" required></div>
                        <div class="mb-4"><label for="phone" class="block font-semibold mb-2">Phone Number</label><input type="tel" id="phone" name="phone" class="w-full px-4 py-2 border rounded-md"></div>
                        <div class="mb-4"><label for="message" class="block font-semibold mb-2">Message</label><textarea id="message" name="message" rows="5" class="w-full px-4 py-2 border rounded-md" required></textarea></div>
                        <button type="submit" class="w-full bg-primary-dark text-white font-bold py-3 px-4 rounded-md hover:bg-gold">Submit Inquiry</button>
                    </form>
                    <div id="form-success-message" class="hidden mt-4 p-4 bg-green-100 text-green-800 rounded-md">Thank you! Your message has been prepared for WhatsApp.</div>
                </div>
                <div class="space-y-8 animate-on-scroll animate-slide-in-right">
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <h3 class="text-2xl font-bold font-display mb-4" data-key="contact-info-title">Contact Information</h3>
                        <a href="https://share.google/ZOhZZVzzGTf8Wf7Fb" target="_blank" class="block p-4 mb-4 bg-gray-100 rounded-lg"><p class="font-semibold">Our Location</p><p class="text-text-muted flex items-start"><i class="fas fa-map-marker-alt text-lg text-gold mt-1 mr-3"></i><span data-key="contact-location"></span></p></a>
                        <ul class="space-y-4 text-text-muted"><li class="flex items-center"><i class="fas fa-envelope text-xl text-gold mr-4"></i><a href="mailto:jaishreegroup1980@gmail.com" class="hover:text-gold" data-key="contact-email"></a></li><li class="flex items-center"><i class="fab fa-whatsapp text-xl text-gold mr-4"></i><a href="https://wa.me/919116127798" target="_blank" class="hover:text-gold" data-key="contact-phone"></a></li></ul>
                    </div>
                    <div class="rounded-lg shadow-lg overflow-hidden h-80"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3558.031652944265!2d75.74465407510118!3d26.90239637665201!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x396db4a67558309d%3A0xab6c65964b581927!2sJai%20shree%20group!5e0!3m2!1sen!2sin!4v1723475850912!5m2!1sen!2sin" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-primary-dark text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div><h3 class="text-xl font-bold font-display">Jai Shree Group</h3><p class="mt-4 text-gray-400" data-key="footer-bio"></p></div>
                <div><h3 class="text-lg font-semibold">Quick Links</h3><ul class="mt-4 space-y-2"><li><a href="#" onclick="showPage('about')" class="hover:text-gold">About Us</a></li><li><a href="#" onclick="showPage('services')" class="hover:text-gold">Services</a></li><li><a href="#" onclick="showPage('projects')" class="hover:text-gold">Projects</a></li><li><a href="#" onclick="showPage('clientele')" class="hover:text-gold">Our Clientele</a></li><li><a href="#" onclick="showPage('csr')" class="hover:text-gold">CSR</a></li><li><a href="#" onclick="showPage('contact')" class="hover:text-gold">Contact Us</a></li></ul></div>
                <div><h3 class="text-lg font-semibold">Contact Info</h3><ul class="mt-4 space-y-3 text-gray-400"><li class="flex items-start"><i class="fas fa-map-marker-alt mt-1 mr-3"></i><span data-key="footer-contact-address"></span></li><li class="flex items-center"><i class="fas fa-envelope mr-3"></i><a href="mailto:jaishreegroup1980@gmail.com" class="hover:text-gold">jaishreegroup1980@gmail.com</a></li><li class="flex items-center"><i class="fab fa-whatsapp mr-3"></i><a href="https://wa.me/919116127798" target="_blank" class="hover:text-gold">+91 91161 27798</a></li></ul></div>
                <div><h3 class="text-lg font-semibold">Follow Us</h3><div class="flex space-x-4 mt-4"><a href="https://www.instagram.com/jai_shree_group" target="_blank" class="text-2xl hover:text-gold"><i class="fab fa-instagram"></i></a></div></div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-6 text-center text-gray-500"><p id="footer-copyright">&copy; 2024 Jai Shree Group. All Rights Reserved.</p></div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="director-modal" class="modal-overlay" onclick="closeModal('director-modal')">
        <div class="modal-content" onclick="event.stopPropagation();"><i class="fas fa-times modal-close" onclick="closeModal('director-modal')"></i><h2 class="text-3xl font-display font-bold mb-4">Meet The Founder</h2><div class="flex flex-col sm:flex-row gap-6 items-center"><img data-key-img="founder-modal-img" src="" alt="Founder Bajaranglal Suthar" class="rounded-full w-36 h-36 object-cover border-4 border-gold"><div><h3 class="text-2xl font-bold text-gold" data-key="founder-modal-name"></h3><p class="text-text-muted mt-2" data-key="founder-modal-bio"></p></div></div></div>
    </div>
    
    <div id="ai-model-modal" class="modal-overlay" onclick="closeModal('ai-model-modal')">
        <div class="modal-content" onclick="event.stopPropagation();"><div class="flex justify-between items-center mb-4"><h2 id="ai-model-title" class="text-3xl font-display font-bold">Conceptual Model</h2><i class="fas fa-times modal-close" onclick="closeModal('ai-model-modal')"></i></div><div id="ai-model-output"><div class="spinner"></div></div><p class="text-center mt-4 text-sm text-text-muted">This is a design concept generated to visualize the project. The final output may vary.</p></div>
    </div>
    
     <!-- Chat Assistant -->
    <div id="chat-assistant">
        <div id="chat-box">
            <div id="chat-header">
                <h3 class="font-bold">Jai Shree Assistant</h3>
                <button id="close-chat-box" class="text-xl">&times;</button>
            </div>
            <div id="chat-body"></div>
            <div id="chat-footer">
                <input type="text" id="chat-input" placeholder="Ask a question...">
                <button id="chat-send"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <div id="chat-assistant-icon"><i class="fas fa-headset"></i></div>
    </div>

    <!-- WhatsApp & Scroll Top -->
    <a href="https://wa.me/919116127798" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>
    <a href="#" id="scroll-to-top"><i class="fas fa-arrow-up"></i></a>

    <script>
        // --- CONFIGURATION ---
        const SUPABASE_URL = 'https://ilutmmmgxtosisprabwn.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlsdXRtbW1neHRvc2lzcHJhYnduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MTIwODUsImV4cCI6MjA3MzE4ODA4NX0.38KIvxCRgC-BfPe7hyhOZTKnhWKJcBMofZ2vlqXxWMU';
        
        // --- GLOBAL STATE ---
        const { createClient } = supabase;
        let dbClient = null;
        let adminLoggedIn = false;
        let slideIndex = 1;
        let projectDetailSlideIndex = 1;
        let initializeAnimationsForPage = () => {};
        let _uploadContext = {}; // Stores context for file uploads
        
        // -----------------------------------------------------------------------------
        // --- CORE UI & NAVIGATION ---
        // -----------------------------------------------------------------------------
        
        function showPage(pageId, subId) {
            if(event) event.preventDefault();
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            const newPage = document.getElementById(pageId);
            if (newPage) newPage.classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(l => {
                l.classList.remove('active');
                if (l.getAttribute('onclick')?.includes(`'${pageId}'`)) l.classList.add('active');
            });
            
            window.scrollTo(0, 0);
            
            if (subId) {
                setTimeout(() => {
                    const el = document.getElementById(subId);
                    if(el) {
                         const headerOffset = 80; // Height of the sticky header
                         const elPos = el.getBoundingClientRect().top;
                         const offsetPos = elPos + window.pageYOffset - headerOffset;
                         window.scrollTo({ top: offsetPos, behavior: "smooth" });
                    }
                }, 100);
            }
            initializeAnimationsForPage(pageId);
        };

        function closeMenu() { document.getElementById('mobile-menu')?.classList.add('hidden'); }
        function openModal(modalId) { document.getElementById(modalId)?.classList.add('active'); }
        function closeModal(modalId) { document.getElementById(modalId)?.classList.remove('active'); }

        function showTab(event, tabId) {
            const container = event.currentTarget.closest('.portfolio-category');
            container.querySelectorAll('.portfolio-tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
            container.querySelectorAll('.portfolio-tab-content').forEach(c => c.classList.remove('active'));
            container.querySelector(`#${tabId}`).classList.add('active');
        }

        function showInteriorTab(event, tabId) {
             const container = event.currentTarget.closest('.portfolio-category');
            container.querySelectorAll('.interior-tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
            container.querySelectorAll('.interior-tab-content').forEach(c => c.classList.remove('active'));
            container.querySelector(`#${tabId}`).classList.add('active');
        }

        function plusSlides(n) { showSlides(slideIndex += n); }
        function showSlides(n) {
            let slides = document.querySelectorAll("#csr-slider-wrapper .csr-slide");
            if (slides.length === 0) return;
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
            slides.forEach(slide => slide.style.display = "none");
            if (slides[slideIndex-1]) slides[slideIndex-1].style.display = "block";
        }

        // -----------------------------------------------------------------------------
        // --- INITIALIZATION ---
        // -----------------------------------------------------------------------------
        
        document.addEventListener("DOMContentLoaded", async () => {
            if (SUPABASE_URL && SUPABASE_ANON_KEY) {
                dbClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                
                await Promise.all([
                    fetchAndDisplayContent(), 
                    fetchAndRenderGalleries(), 
                    fetchAndBuildHeroSlideshow()
                ]);
                
                const { data: { session } } = await dbClient.auth.getSession();
                if (session) enableAdminMode();

            } else {
                console.warn("Supabase credentials not set. Site will be static.");
            }
            
            setupEventListeners();
            initializePageAnimations();
            showPage('home');
        });

        function setupEventListeners() {
            document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
            
            document.getElementById('contact-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const form = e.target;
                const whatsappMsg = `*Inquiry from Website:*\n\n*Name:* ${form.name.value}\n*Email:* ${form.email.value}\n*Phone:* ${form.phone.value}\n*Message:* ${form.message.value}`;
                window.open(`https://wa.me/919116127798?text=${encodeURIComponent(whatsappMsg)}`, '_blank');
                document.getElementById('form-success-message').classList.remove('hidden');
                setTimeout(() => document.getElementById('form-success-message').classList.add('hidden'), 5000);
                form.reset();
            });

            const scrollToTopBtn = document.getElementById('scroll-to-top');
            window.addEventListener('scroll', () => scrollToTopBtn.classList.toggle('visible', window.pageYOffset > 300));
            scrollToTopBtn.addEventListener('click', (e) => { 
                e.preventDefault(); 
                window.scrollTo({ top: 0, behavior: 'smooth' }); 
            });

            setupAdminFeatures();
            setupChatAssistant();
        }
        
        // -----------------------------------------------------------------------------
        // --- DATA FETCHING & RENDERING ---
        // -----------------------------------------------------------------------------
        
        async function fetchAndDisplayContent() {
            if (!dbClient) return;
            const { data, error } = await dbClient.from('content').select('*');
            if (error) return console.error('Error fetching content:', error);
            
            data.forEach(item => {
                const elements = document.querySelectorAll(`[data-key="${item.id}"], [data-key-img="${item.id}"]`);
                elements.forEach(el => {
                    if (item.type === 'text') {
                        el.innerHTML = item.content;
                    } else if (item.type === 'image') {
                        if (el.tagName === 'IMG') {
                            el.src = item.content;
                        } else {
                            const currentStyle = el.style.backgroundImage || '';
                            const gradient = currentStyle.startsWith('linear-gradient') ? currentStyle.substring(0, currentStyle.indexOf('url(')) : '';
                            el.style.backgroundImage = `${gradient}url('${item.content}')`;
                        }
                    }
                });
            });
        }

        async function fetchAndRenderGalleries() {
            if (!dbClient) return;
            const { data, error } = await dbClient.from('gallery_images').select('*').order('id');
            if (error) return console.error("Error fetching galleries:", error);

            // REVERTED: Restored the original galleries list to fix the project photo display issue.
            const galleries = {
                'project-col': document.getElementById('colonies-gallery'), 'project-res': document.getElementById('residential-gallery'),
                'project-com': document.getElementById('commercial-gallery'), 'project-int-res': document.getElementById('residential-int-gallery'),
                'project-int-com': document.getElementById('commercial-int-gallery'), 
                'csr-1': document.getElementById('csr-gallery-1'), 
                'csr-2': document.getElementById('csr-gallery-2')
            };

            Object.values(galleries).forEach(el => el && (el.innerHTML = ''));
            
            data.forEach(item => {
                if (galleries[item.gallery_key]) {
                    const element = item.gallery_key.startsWith('csr') ? createCsrImageCard(item) : createProjectCard(item);
                    galleries[item.gallery_key].insertAdjacentHTML('beforeend', element);
                }
            });
             
             document.querySelectorAll('#projects .animate-on-scroll, #csr .animate-on-scroll').forEach(el => {
                const observer = new IntersectionObserver((entries) => {
                    if(entries[0].isIntersecting) {
                        el.classList.add('is-visible');
                        observer.unobserve(el);
                    }
                }, {threshold: 0.1});
                observer.observe(el);
             });
             if (adminLoggedIn) attachAdminEventListeners();
        }

        function createProjectCard(item) {
             return `<div class="gallery-item bg-white rounded-lg shadow-lg overflow-hidden group animate-on-scroll animate-fade-in-up flex flex-col" data-id="${item.id}">
                    <div class="relative"><img src="${item.image_url}" alt="${item.title}" class="w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"></div>
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-bold font-display">${item.title}</h3>
                        <p class="text-text-muted"><i class="fas fa-map-marker-alt text-gold mr-2"></i><span>${item.location}</span></p>
                        <div class="mt-2 text-sm text-text-dark flex-grow">${item.description}</div>
                        <button onclick="openProjectDetails(${item.id})" class="mt-4 w-full bg-primary-dark text-white font-bold py-2 px-4 rounded-md hover:bg-gold transition-colors text-sm">View Project</button>
                        <div class="admin-project-controls justify-between mt-4">
                            <button onclick="editGalleryItem(${item.id})" class="text-sm text-blue-600 hover:underline">Edit Text</button>
                            <button onclick="openProjectImagesManager(${item.id})" class="text-sm text-green-600 hover:underline">Manage Images</button>
                            <button onclick="deleteGalleryItem(${item.id})" class="text-sm text-red-600 hover:underline">Delete</button>
                        </div></div></div>`;
        }

        function createCsrImageCard(item) {
             return `<div class="gallery-item relative group" data-id="${item.id}">
                        <img src="${item.image_url}" class="w-full h-48 object-cover rounded-lg shadow-md">
                        <div class="admin-gallery-controls justify-center absolute top-2 right-2">
                            <button onclick="deleteGalleryItem(${item.id}, true)" class="bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg">&times;</button>
                        </div>
                    </div>`;
        }

        async function fetchAndBuildHeroSlideshow() {
            if(!dbClient) return;
            const slideshow = document.getElementById('hero-slideshow');
            if (!slideshow) return;
            slideshow.innerHTML = '';
            const { data, error } = await dbClient.from('hero_images').select('image_url').eq('is_active', true);
            
            if (error || !data || data.length === 0) {
                slideshow.innerHTML = `
                    <div class="hero-slide active" style="background-image: linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.3)), url('https://images.pexels.com/photos/164558/pexels-photo-164558.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');"></div>
                    <div class="hero-slide" style="background-image: linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.3)), url('https://images.pexels.com/photos/259588/pexels-photo-259588.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');"></div>
                `;
            } else {
                data.forEach((img, index) => {
                    const slide = document.createElement('div');
                    slide.className = `hero-slide${index === 0 ? ' active' : ''}`;
                    slide.style.backgroundImage = `linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.3)), url('${img.image_url}')`;
                    slideshow.appendChild(slide);
                });
            }
            initializeAnimationsForPage('home');
        }

        // -----------------------------------------------------------------------------
        // --- ADMIN MODE ---
        // -----------------------------------------------------------------------------
        
        function setupAdminFeatures() {
            let clickCount = 0;
            document.getElementById('footer-copyright').addEventListener('click', () => {
                clickCount++;
                if (clickCount >= 7) { openModal('admin-login-modal'); clickCount = 0; }
                setTimeout(() => clickCount = 0, 2000);
            });

            document.getElementById('admin-login-form').addEventListener('submit', handleAdminLogin);
            document.getElementById('save-changes-btn').addEventListener('click', saveAllChanges);
            document.getElementById('logout-btn').addEventListener('click', handleAdminLogout);
            
            const dropZone = document.getElementById('drop-zone');
            dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('drag-over'); });
            dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                if (e.dataTransfer.files.length) {
                    document.getElementById('image-uploader').files = e.dataTransfer.files;
                    handleImageUpload({target: document.getElementById('image-uploader')});
                }
            });
            document.getElementById('image-uploader').addEventListener('change', handleImageUpload);
        }

        async function handleAdminLogin(e) {
            e.preventDefault();
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            const { data, error } = await dbClient.auth.signInWithPassword({ email, password });
            if (error) {
                document.getElementById('login-error').textContent = error.message;
                document.getElementById('login-error').classList.remove('hidden');
            } else { 
                closeModal('admin-login-modal');
                enableAdminMode(); 
            }
        }

        async function handleAdminLogout() { 
            await dbClient.auth.signOut(); 
            window.location.reload(); 
        }

        function enableAdminMode() {
            adminLoggedIn = true;
            document.getElementById('admin-panel').classList.remove('hidden');
            document.body.classList.add('admin-edit-mode');
            attachAdminEventListeners();
        }

        function attachAdminEventListeners() {
            document.querySelectorAll('[data-key]').forEach(el => el.contentEditable = 'true');
            document.querySelectorAll('[data-key-img]').forEach(el => {
                el.addEventListener('click', handleSingleImageEdit);
                const removeBtn = document.createElement('button');
                removeBtn.innerHTML = '&times;';
                removeBtn.className = 'remove-cover-btn';
                removeBtn.onclick = removeCurrentImage;
                el.appendChild(removeBtn);
            });
            document.querySelectorAll('.gallery-item .relative').forEach(el => el.addEventListener('click', handleGalleryImageEdit));
        }
        
        // --- ADMIN IMAGE & GALLERY MANAGEMENT ---

        function openUploadModal(contextKey, projectId = null) {
            if (contextKey === 'addHero') {
                _uploadContext = { type: 'addHero' };
                document.getElementById('image-uploader').multiple = false;
            } else if (contextKey === 'addProjectImage') {
                _uploadContext = { type: 'addProjectImage', projectId: projectId };
                document.getElementById('image-uploader').multiple = true;
            } else if (contextKey.startsWith('csr')) {
                 _uploadContext = { type: 'addGallery', gallery_key: contextKey };
                document.getElementById('image-uploader').multiple = true;
            } else {
                _uploadContext = { type: 'addGallery', gallery_key: contextKey };
                document.getElementById('image-uploader').multiple = true;
            }
            openModal('upload-modal');
        }


        function handleSingleImageEdit(e) {
            if (!adminLoggedIn || e.target.classList.contains('remove-cover-btn')) return;
            e.preventDefault(); e.stopPropagation();
            _uploadContext = { type: 'single', element: e.currentTarget };
            document.getElementById('image-uploader').multiple = false;
            openModal('upload-modal');
        }

        function handleGalleryImageEdit(e) {
            if (!adminLoggedIn) return;
            e.preventDefault(); e.stopPropagation();
            const galleryItem = e.currentTarget.closest('.gallery-item');
            editGalleryItem(Number(galleryItem.dataset.id), galleryItem.closest('#csr-gallery-1, #csr-gallery-2, #csr-gallery-3') !== null);
        }
        
        async function saveAllChanges() { 
            if (!adminLoggedIn || !dbClient) return;
            const btn = document.getElementById('save-changes-btn');
            btn.querySelector('.btn-text').classList.add('hidden');
            btn.querySelector('.btn-spinner').classList.remove('hidden');

            const updates = [];
            document.querySelectorAll('[data-key]').forEach(el => {
                updates.push({ id: el.dataset.key, content: el.innerHTML, type: 'text' });
            });
            document.querySelectorAll('[data-key-img]').forEach(el => {
                let url = '';
                if(el.tagName === 'IMG') {
                    url = el.src;
                } else if (el.style.backgroundImage) {
                    url = el.style.backgroundImage.slice(5, -2).replace(/"/g, ""); // Clean URL string
                }
                if (url) {
                    updates.push({ id: el.dataset.keyImg, content: url, type: 'image' });
                }
            });

            const { error } = await dbClient.from('content').upsert(updates, { onConflict: 'id' });
            
            btn.querySelector('.btn-text').classList.remove('hidden');
            btn.querySelector('.btn-spinner').classList.add('hidden');
            alert(error ? `Error: ${error.message}` : 'Content saved successfully!');
        }

        async function editGalleryItem(id, isCsr = false) {
            _uploadContext = { type: 'editGallery', id: id };
            document.getElementById('image-uploader').multiple = false;
            if (isCsr) return openModal('upload-modal');
            
            const { data } = await dbClient.from('gallery_images').select('*').eq('id', id).single();
            if (!data) return;

            const newTitle = prompt("Enter new title:", data.title);
            const newLocation = prompt("Enter new location:", data.location);
            const newDesc = prompt("Enter new description:", data.description);

            const updates = {
                title: newTitle || data.title,
                location: newLocation || data.location,
                description: newDesc || data.description
            };
            
            await dbClient.from('gallery_images').update(updates).eq('id', id);
            await fetchAndRenderGalleries(); 
           
            if (confirm("Text updated. Would you like to update the main cover image for this item?")) {
                openModal('upload-modal');
            }
        }

        async function deleteGalleryItem(id, isCsr = false) {
            if (!confirm("Are you sure you want to delete this item?")) return;
            if (!isCsr) {
                await dbClient.from('project_additional_images').delete().eq('project_id', id);
            }
            await dbClient.from('gallery_images').delete().eq('id', id);
            await fetchAndRenderGalleries();
        }
        
        async function handleImageUpload(e) {
            if (!adminLoggedIn || !e.target.files || e.target.files.length === 0) return;
            const files = Array.from(e.target.files);
            closeModal('upload-modal');
            
            alert(`Uploading ${files.length} image(s)... please wait.`);

            const uploadPromises = files.map(file => uploadFileAndGetUrl(file));
            const urls = await Promise.all(uploadPromises);
            const successfulUrls = urls.filter(url => url !== null);

            if (successfulUrls.length < files.length) {
                alert('Some files failed to upload.');
            }

            const { type, element, gallery_key, id, projectId } = _uploadContext;

            if (type === 'single') {
                if (element.tagName === 'IMG') element.src = successfulUrls[0];
                else element.style.backgroundImage = `url('${successfulUrls[0]}')`;
            } else if (type === 'addGallery') {
                 if (gallery_key.startsWith('csr')) {
                    if (successfulUrls.length > 0) {
                        const newCsrImages = successfulUrls.map(url => ({ gallery_key: gallery_key, image_url: url }));
                        await dbClient.from('gallery_images').insert(newCsrImages);
                    }
                } else {
                    const { data: newProject } = await dbClient.from('gallery_images').insert({ 
                        gallery_key: gallery_key, 
                        image_url: successfulUrls.shift(), // Use first image as cover
                        title: prompt("Enter project title:"),
                        location: prompt("Enter project location:"),
                        description: prompt("Enter project description (HTML allowed):")
                    }).select().single();
                    
                    if (newProject && successfulUrls.length > 0) {
                        const additionalImages = successfulUrls.map(url => ({ project_id: newProject.id, image_url: url }));
                        await dbClient.from('project_additional_images').insert(additionalImages);
                    }
                }
                await fetchAndRenderGalleries();

            } else if (type === 'editGallery') {
                await dbClient.from('gallery_images').update({ image_url: successfulUrls[0] }).eq('id', id);
                await fetchAndRenderGalleries();
            } else if (type === 'addHero') {
                await dbClient.from('hero_images').insert({ image_url: successfulUrls[0] });
                await openHeroManager();
            } else if (type === 'addProjectImage') {
                const newImages = successfulUrls.map(url => ({ project_id: projectId, image_url: url }));
                await dbClient.from('project_additional_images').insert(newImages);
                await openProjectImagesManager(projectId);
            }
             _uploadContext = {};
             e.target.value = ''; // Reset file input
        }

        function removeCurrentImage(event) {
            event.preventDefault();
            event.stopPropagation();
            if (!confirm('Are you sure you want to remove this image? This will be saved when you click "Save Changes".')) return;

            const parentEl = event.target.parentElement;
            const placeholderUrl = 'https://placehold.co/800x600/f1f5f9/cbd5e1?text=No+Image';

            if (parentEl.tagName === 'IMG') {
                parentEl.src = placeholderUrl;
            } else {
                const currentStyle = parentEl.style.backgroundImage || '';
                const gradient = currentStyle.startsWith('linear-gradient') ? currentStyle.substring(0, currentStyle.indexOf('url(')) : '';
                parentEl.style.backgroundImage = `${gradient}url('${placeholderUrl}')`;
            }
        }

        async function uploadFileAndGetUrl(file) {
            const fileName = `${Date.now()}-${file.name.replace(/[^a-zA-Z0-9.]/g, '_')}`;
            const { error } = await dbClient.storage.from('website-images').upload(fileName, file);
            if (error) { console.error(error); return null; }
            const { data } = dbClient.storage.from('website-images').getPublicUrl(fileName);
            return data.publicUrl;
        }
        
        // --- HERO SLIDESHOW MANAGER ---
        async function openHeroManager() {
            openModal('hero-manager-modal');
            const grid = document.getElementById('hero-manager-grid');
            grid.innerHTML = '<div class="spinner"></div>';
            const { data, error } = await dbClient.from('hero_images').select('*');
            if (error || !data) { grid.innerHTML = 'Could not load images.'; return; }
            grid.innerHTML = data.map(img => `<label class="manager-item"><input type="checkbox" class="absolute hidden" value="${img.id}" ${img.is_active ? 'checked' : ''}><img src="${img.image_url}"><button class="delete-btn" onclick="deleteHeroImage(event, ${img.id})">&times;</button></label>`).join('');
        }
        async function saveHeroSelection() { 
            const updates = Array.from(document.querySelectorAll('#hero-manager-grid input')).map(i => ({ id: i.value, is_active: i.checked }));
            await dbClient.from('hero_images').upsert(updates);
            closeModal('hero-manager-modal');
            await fetchAndBuildHeroSlideshow();
        }
        async function deleteHeroImage(e, id) { 
            e.preventDefault(); 
            if(!confirm('Are you sure you want to permanently delete this image?')) return; 
            await dbClient.from('hero_images').delete().eq('id', id); 
            await openHeroManager(); 
        }

        // --- PROJECT DETAILS & IMAGE MANAGER ---
        async function openProjectDetails(projectId) {
            const { data: project, error: projectError } = await dbClient.from('gallery_images').select('*').eq('id', projectId).single();
            const { data: images, error: imagesError } = await dbClient.from('project_additional_images').select('image_url').eq('project_id', projectId);

            if (projectError) return;

            const allImages = [project.image_url, ...(images?.map(i => i.image_url) || [])];
            
            const slider = document.getElementById('project-details-slider');
            slider.innerHTML = allImages.map((url, index) => `
                <div class="project-detail-slide" style="display: ${index === 0 ? 'block' : 'none'};">
                    <img src="${url}" alt="${project.title} image ${index + 1}">
                </div>
            `).join('') + (allImages.length > 1 ? `<a class="prev" onclick="plusProjectSlides(-1)">&#10094;</a><a class="next" onclick="plusProjectSlides(1)">&#10095;</a>` : '');

            const info = document.getElementById('project-details-info');
            info.innerHTML = `<h2 class="text-3xl font-bold font-display">${project.title}</h2>
                              <p class="text-text-muted mt-2"><i class="fas fa-map-marker-alt text-gold mr-2"></i>${project.location}</p>
                              <div class="mt-4 text-text-dark">${project.description}</div>`;

            projectDetailSlideIndex = 1;
            openModal('project-details-modal');
        }

        function plusProjectSlides(n) {
            const slides = document.querySelectorAll('#project-details-slider .project-detail-slide');
            projectDetailSlideIndex += n;
            if (projectDetailSlideIndex > slides.length) { projectDetailSlideIndex = 1; }
            if (projectDetailSlideIndex < 1) { projectDetailSlideIndex = slides.length; }
            slides.forEach(s => s.style.display = "none");
            slides[projectDetailSlideIndex - 1].style.display = "block";
        }

        async function openProjectImagesManager(projectId) {
            _uploadContext = { projectId: projectId };
            openModal('project-images-manager-modal');
            
            const addImageBtn = document.getElementById('project-manager-add-image-btn');
            if(addImageBtn) addImageBtn.onclick = () => openUploadModal('addProjectImage', projectId);

            const grid = document.getElementById('project-images-grid');
            const { data: project, error: projectErr } = await dbClient.from('gallery_images').select('title').eq('id', projectId).single();
            if (projectErr || !project) {
                console.error("Project not found for image manager");
                closeModal('project-images-manager-modal');
                return;
            }
            document.getElementById('project-images-title').textContent = `Manage Images for: ${project.title}`;

            grid.innerHTML = '<div class="spinner"></div>';
            const { data } = await dbClient.from('project_additional_images').select('*').eq('project_id', projectId);
            if (!data) { grid.innerHTML = 'Could not load images.'; return; }
            grid.innerHTML = data.map(img => `<div class="manager-item"><img src="${img.image_url}"><button class="delete-btn" onclick="deleteProjectImage(${img.id}, ${projectId})">&times;</button></div>`).join('');
        }
        
        async function deleteProjectImage(imageId, projectId) {
             if (!confirm('Are you sure you want to permanently delete this image?')) return;
             await dbClient.from('project_additional_images').delete().eq('id', imageId);
             await openProjectImagesManager(projectId);
        }

        // --- CONCEPTUAL MODEL GENERATOR ---
        async function generateAIModel(projectName) { /* ... (omitted for brevity) ... */ }

        // --- CHAT ASSISTANT ---
        function setupChatAssistant() {
            const chatIcon = document.getElementById('chat-assistant-icon'), chatBox = document.getElementById('chat-box'),
                  closeChatBtn = document.getElementById('close-chat-box'), chatInput = document.getElementById('chat-input'),
                  chatSend = document.getElementById('chat-send'), chatBody = document.getElementById('chat-body');
            
            chatIcon.addEventListener('click', () => chatBox.classList.add('active'));
            closeChatBtn.addEventListener('click', () => chatBox.classList.remove('active'));
            chatSend.addEventListener('click', handleSendMessage);
            chatInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleSendMessage(); });

            function addMessage(message, type) {
                const messageEl = document.createElement('div');
                messageEl.className = `chat-message ${type}-message`;
                messageEl.innerHTML = message;
                chatBody.appendChild(messageEl);
                chatBody.scrollTop = chatBody.scrollHeight;
            }

            function handleSendMessage() {
                const message = chatInput.value.trim();
                if(!message) return;
                addMessage(message, 'user');
                chatInput.value = '';
                getBotResponse(message);
            }
            
            function getBotResponse(userMessage) {
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'typing-indicator';
                typingIndicator.innerHTML = '<span></span><span></span><span></span>';
                chatBody.appendChild(typingIndicator);
                chatBody.scrollTop = chatBody.scrollHeight;
                setTimeout(() => {
                    chatBody.removeChild(typingIndicator);
                    addMessage(generateResponse(userMessage), 'bot');
                }, 1200);
            }
            
            const knowledgeBase = {
                'greeting': { keywords: ['hello', 'hi', 'hey', 'namaste'], response: 'Hello! Welcome to Jai Shree Group. How can I help you today?' },
                'about': { keywords: ['about', 'who are you', 'company', 'group', 'history', 'tell me about'], response: 'Jai Shree Group is a leading real estate and interiors company founded in 1980 by Mr. Bajaranglal Suthar. With over 40 years of experience, we have a strong reputation for quality and trust. You can learn more on our <a href="#" onclick="showPage(\'about\')">About Us</a> page.' },
                'founder': { keywords: ['founder', 'owner', 'director', 'bajaranglal suthar'], response: 'Our respected founder is Mr. Bajaranglal Suthar. He established Jai Shree Group in 1980 with a vision for quality and integrity that continues to guide us.' },
                'experience': { keywords: ['experience', 'how long', 'since when', 'established'], response: 'We have been building India\'s dreams since 1980, giving us over four decades of trusted experience in the industry.' },
                'services': { keywords: ['services', 'what you do', 'offer', 'solutions'], response: 'We offer two main categories of services: <b>Real Estate Development</b> and <b>Turnkey Interior Solutions</b>. This includes everything from residential and commercial construction to complete interior design and execution. Check out our <a href="#" onclick="showPage(\'services\')">Services</a> page for full details.' },
                'real_estate_services': { keywords: ['real estate', 'construction', 'plotting', 'colony', 'township'], response: 'Our real estate division handles large-scale projects, including residential & commercial construction, colony and township development, and infrastructure projects like road construction. You can see examples on the <a href="#" onclick="showPage(\'projects\')">Projects</a> page.' },
                'interior_services': { keywords: ['interior', 'design', 'decoration', 'turnkey'], response: 'Our interiors division, Jai Shree Interiors, provides complete end-to-end solutions for residential spaces like flats and villas, as well as commercial properties such as offices, hospitals, and retail showrooms. See our <a href="#" onclick="showPage(\'services\')">Services</a> page for more.' },
                'projects': { keywords: ['projects', 'work', 'portfolio', 'completed', 'past work'], response: 'We have a diverse portfolio with over 1155 successful projects. You can explore our landmark real estate and interior projects, including famous colonies like Mansarovar in Jaipur, on the <a href="#" onclick="showPage(\'projects\')">Projects</a> page.' },
                'contact': { keywords: ['contact', 'address', 'phone', 'email', 'location', 'reach you'], response: 'You can call or WhatsApp us at +91 91161 27798, or email jaishreegroup1980@gmail.com. Our head office is at 41, Nemi Nagar Extension, Vaishali Nagar, Jaipur. For a map and form, visit the <a href="#" onclick="showPage(\'contact\')">Contact</a> page.'},
                'csr': { keywords: ['csr', 'social', 'trust', 'charity', 'give back'], response: 'We are deeply committed to social responsibility through the Mangilal Suthar Charitable Trust. Our initiatives focus on supporting underprivileged students with hostels, caring for cows in our Gausala, and environmental work like tree planting. Learn more on our <a href="#" onclick="showPage(\'csr\')">CSR</a> page.'},
                'quality': { keywords: ['quality', 'materials', 'guarantee', 'standards'], response: 'Uncompromising quality is a core value. We use the finest materials and have strict quality control processes to ensure our projects are durable, safe, and built to the highest standards.' },
                'quote': { keywords: ['quote', 'estimate', 'price', 'cost', 'inquiry'], response: 'For a detailed quote or to discuss your project requirements, please fill out the form on our <a href="#" onclick="showPage(\'contact\')">Contact</a> page, and our team will get in touch with you promptly.'},
                'thanks': { keywords: ['thank you', 'thanks', 'ok', 'great'], response: 'You\'re welcome! Is there anything else I can assist you with?'},
                'bye': { keywords: ['bye', 'goodbye', 'that is all'], response: 'Thank you for your interest in Jai Shree Group. Have a great day!'}
            };
            function generateResponse(message) {
                const lowerCaseMessage = message.toLowerCase();
                for (const key in knowledgeBase) {
                    if (knowledgeBase[key].keywords.some(keyword => lowerCaseMessage.includes(keyword))) {
                        return knowledgeBase[key].response;
                    }
                }
                return "I'm sorry, I could not find information on that. You can ask me about our services, projects, or contact details. For specific inquiries, I recommend visiting the <a href='#' onclick='showPage(\"contact\")'>Contact</a> page.";
            }
            addMessage("Hello! I'm the Jai Shree Group assistant. Ask me about our services, projects, or how to contact us.", "bot");
        }
        
        // --- ANIMATIONS ---
        function initializePageAnimations() {
            const animationObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const delay = parseInt(entry.target.getAttribute('data-delay') || '0', 10);
                        setTimeout(() => {
                            entry.target.classList.add('is-visible');
                        }, delay);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            let heroSlideshowInterval;

            initializeAnimationsForPage = (pageId) => {
                const page = document.getElementById(pageId);
                if (!page) return;
                
                page.querySelectorAll('.animate-on-scroll').forEach(el => {
                    el.classList.remove('is-visible');
                    animationObserver.observe(el);
                });

                if (pageId === 'home') {
                    const heroTitle = page.querySelector('.hero-title');
                    if (heroTitle && heroTitle.textContent) {
                        heroTitle.innerHTML = heroTitle.textContent.trim().split('').map(c => `<span>${c === ' ' ? '&nbsp;' : c}</span>`).join('');
                        setTimeout(() => {
                            heroTitle.classList.add('is-visible');
                            heroTitle.querySelectorAll('span').forEach((s, i) => s.style.transitionDelay = `${i * 30}ms`);
                        }, 300);
                    }
                    
                    const heroSlides = page.querySelectorAll("#hero-slideshow .hero-slide");
                    if (heroSlides.length > 0) {
                        let current = 0;
                        clearInterval(heroSlideshowInterval);
                        heroSlideshowInterval = setInterval(() => {
                            heroSlides[current]?.classList.remove('active');
                            current = (current + 1) % heroSlides.length;
                            heroSlides[current]?.classList.add('active');
                        }, 5000);
                    }

                    const counters = page.querySelectorAll('#counter-section [data-target]');
                    const counterObserver = new IntersectionObserver((entries, obs) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const counter = entry.target;
                                const target = +counter.getAttribute('data-target');
                                let count = 0;
                                const inc = Math.ceil(target / 100);
                                const update = () => {
                                    if (count < target) {
                                        count = Math.min(count + inc, target);
                                        counter.innerText = count.toLocaleString();
                                        setTimeout(update, 20);
                                    } else {
                                        counter.innerText = target.toLocaleString();
                                    }
                                };
                                update();
                                obs.unobserve(counter);
                            }
                        });
                    }, { threshold: 0.8 });
                    counters.forEach(c => counterObserver.observe(c));
                }
            }
        }
    </script>
</body>
</html>

